function parseURL(e){var r,t,n,a=document.createElement("a"),o={}
for(a.href=e,r=a.search.replace(/^\?/,"").split("&"),n=0;n<r.length;n++)t=r[n].split("="),o[t[0]]=t[1]
return{hostname:a.hostname,pathname:a.pathname}}var insertPHP=$("form").attr("action")
$("form").on("submit",function(e){e.preventDefault(),$("input#url, input#username").css("border-color","initial")
var r=$("input#username").val(),t=$("input#url").val(),n=$("input#title").val(),a=$("input#description").val(),o="username="+r+"&url="+t+"&title="+n+"&description="+a
if(r.length>0&&t.length>0){var s=parseURL(t).hostname,l=parseURL(t).pathname,u=l.substr(l.length-4)
"docs.google.com"==s&&"/pub"==u?$.ajax({type:"POST",url:insertPHP,data:o,success:function(e){var t=window.location.href+"?u="+r
$("#response").html(e+'<br><a href="'+t+'">'+t+"</a>")}}):($("input#url").css("border-color","red"),$("#response").html("bad doc url"))}else 0==r.length&&$("input#username").css("border-color","red"),0==t.length&&$("input#url").css("border-color","red"),$("#response").html("form incomplete")
return!1})
